# Copyright Vespa.ai. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.

schema passage {
    document passage {
        field id type string {
            indexing: summary | attribute
        }
    
        field text type string {
            indexing: summary | index
            index: enable-bm25
        }
        
        field prompt type string {
        }
    }
    
    field names type array<string> {
        indexing: input text | generate names_generator | split '\n' | index | summary
        index: enable-bm25
    }
    
    field title type string {
        indexing: input text | generate title_generator | index | summary
        index: enable-bm25
    }
    
    fieldset default {
        fields: text, prompt, names
    }
    
    rank-profile default {
        first-phase {
            expression: bm25(text)
        }
    }
    
    rank-profile with_names {
        first-phase {
            expression: 0.6 * bm25(names) * 0.4 * bm25(text)
        }
    }
}
